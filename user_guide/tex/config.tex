\chapter{Configuration macros}
\label{chap:Configuration macros}

The library has a few configuration macros. All these macros can be overwritten
by the user by defining them with proper values before including any of the
library's headers. There are some additional macros for \rng related
functionalities. They will be discussed in chapter~\ref{chap:Random number
  generating}.

There are three types of configuration macros. The first type has a prefix
\verb|VSMC_HAS_|. These macros specify a certain feature or third-party library
is available. These are listed in table~\ref{tab:Configuration macros for
  feature availability}. The second type has a prefix \verb|VSMC_USE_|. These
macros specify that a certain feature or third-party library can be used, if
available. These are listed in table~\ref{tab:Configuration macros for feature
  usability}. For example, if \verb|VSMC_HAS_MKL| is defined to a non-zero
value, but the it is desirable not to use \mkl's vector math functions, then
one can define \verb|VSMC_USE_MKL_VML| to zero to prevent the library to use
this individual component. The third type changes the behavior of the library,
for example by setting default value of some template parameter or the choosing
among different implementations of a certain feature. They are listed in
table~\ref{tab:Configuration macros for library behavior}.

\begin{table}
  \begin{tabularx}{\textwidth}{llX}
    \toprule
    Macro & Default & Description \\
    \midrule
    \verb|VSMC_HAS_INT128| & Platform dependent
    & Support for 128-bits integers \\
    \verb|VSMC_HAS_SSE2| & Platform dependent
    & Support for \sse{}2 intrinsic functions \\
    \verb|VSMC_HAS_AVX2| & Platform dependent
    & Support for \avx{}2 intrinsic functions \\
    \verb|VSMC_HAS_AES_NI| & Platform dependent
    & Support for \aesni intrinsic functions \\
    \verb|VSMC_HAS_RDRAND| & Platform dependent
    & Support for \rdrand intrinsic functions \\
    \verb|VSMC_HAS_X86| & Platform dependent
    & Support for x86 platform \\
    \verb|VSMC_HAS_X86_64| & Platform dependent
    & Support for x86-64 platform \\
    \verb|VSMC_HAS_POSIX|  & Platform dependent
    & Support for \posix platform \\
    \verb|VSMC_HAS_OMP| & Platform dependent
    & Support for OpenMP~3.0 or higher \\
    \verb|VSMC_HAS_OPENCL| & \verb|0|
    & Support for OpenCL~1.2 or higher \\
    \verb|VSMC_HAS_TBB| & \verb|0|
    & Support for \tbb~4.0 or higher \\
    \verb|VSMC_HAS_TBB_MALLOC| & \verb|VSMC_HAS_TBB|
    & Support for \tbb memory allocation \\
    \verb|VSMC_HAS_HDF5| & \verb|0| &
    Support for \hdf~1.8.6 or higher \\
    \verb|VSMC_HAS_MKL| & \verb|0|
    & Support for \mkl~11.0 or higher \\
    \bottomrule
  \end{tabularx}
  \caption{Configuration macros for feature availability}
  \label{tab:Configuration macros for feature availability}
\end{table}

\begin{table}
  \begin{tabularx}{\textwidth}{llX}
    \toprule
    Macro & Default & Description \\
    \midrule
    \verb|VSMC_USE_OMP| & \verb|VSMC_HAS_OMP|
    & Use OpenMP parallelization outside the \smp module \\
    \verb|VSMC_USE_TBB| & \verb|VSMC_HAS_TBB|
    & Use \tbb parallelization outside the \smp module \\
    \verb|VSMC_USE_TBB_TLS| & \verb|VSMC_HAS_TBB|
    & Use \tbb thread-local storage classes (\tls) \\
    \verb|VSMC_USE_MKL_CBLAS| & \verb|VSMC_HAS_MKL|
    & Use \verb|mkl_cblas.h| instead of \verb|cblas.h| \\
    \verb|VSMC_USE_MKL_VML| & \verb|VSMC_HAS_MKL|
    & Use \mkl vector mathematical functions (\vml) \\
    \verb|VSMC_USE_MKL_VSL| & \verb|VSMC_HAS_MKL|
    & Use \mkl statistical functions (\vsl) \\
    \verb|VSMC_USE_ACCELERATE| & Platform dependent
    & Use Mac OS X Accelerate framework for \blas. Ignored if
    \verb|VSMC_USE_MKL_BLAS| is defined to a non-zero value. \\
    \bottomrule
  \end{tabularx}
  \caption{Configuration macros for feature usability}
  \label{tab:Configuration macros for feature usability}
\end{table}

\begin{table}
  \begin{tabularx}{\textwidth}{llX}
    \toprule
    Macro & Default & Description \\
    \midrule
    \verb|VSMC_INT128| & Platform dependent
    & The 128-bit integer type \\
    \verb|VSMC_ALIGNMENT| & \verb|32|
    & Default alignment for scalar types \\
    \verb|VSMC_ALIGNMENT_CACHE| & \verb|64|
    & Default cache line alignment for scalar types \\
    \verb|VSMC_ALIGNMENT_MIN| & \verb|16|
    & Minimum alignment for all types \\
    \verb|VSMC_ALIGNED_MEMORY_TYPE| & Platform dependent
    & The type of \verb|AlignedMemory| \\
    \verb|VSMC_CONSTRUCT_SCALAR| & \verb|0|
    & Should \verb|Allocator::construct| zero out scalar types \\
    \bottomrule
  \end{tabularx}
  \caption{Configuration macros for library behavior}
  \label{tab:Configuration macros for library behavior}
\end{table}
